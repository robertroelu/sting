"use strict";(()=>{function m(t,r){return(r||document).querySelector(t)}function h(t,r){return Array.from((r||document).querySelectorAll(t))}function d(t,r,n){let s=r.cloneNode(!0),c=s.lastChild;if(!c)return;c.setAttribute("fs-cmsfilter-field",n);let l=s.querySelector("span"),i=s.querySelector("input");if(!(!l||!i))return l.textContent=t,i.value=t,s}function L(t,r){let n=r.cloneNode(!0);console.log(n);let s=n.querySelector('[data-element="link"]'),c=n.querySelector('[data-element="logo"]'),l=n.querySelector('[data-element="title"]'),i=n.querySelector('[data-element="company"]'),f=n.querySelector('[data-element="location"]'),u=n.querySelector('[data-element="level"]'),p=n.querySelector('[data-element="type"]'),a=n.querySelector('[data-element="job-function"]'),y=Array.isArray(t.locations)?t.locations.join(", "):t.locations;return s&&(s.href=t.url||""),c&&(c.src=t.companyLogo||""),l&&(l.textContent=t.title),i&&(i.textContent=t.companyName),f&&(f.textContent=y),u&&(u.textContent=t.experience),p&&(p.textContent=t.function),a&&(a.textContent=t.function),n.classList.remove("hide"),n}async function g(){try{return await(await fetch("https://feed.jobylon.com/feeds/a23d1a2b-647c-4497-b36b-1555efaba88f/?format=json")).json()}catch(t){console.error(t)}}function S(t,r,n="desc"){t.sort((s,c)=>{let l=new Date(s[r]),i=new Date(c[r]);if(n==="asc")return l.getTime()-i.getTime();if(n==="desc")return i.getTime()-l.getTime();throw new Error("Order must be asc or desc")})}window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async t=>{let[r]=t,{listInstance:n}=r,s=m('[startup-jobs-element="template"]');if(!r||!s)return;let c=await g(),i=h('[startup-jobs-element="source-list"] script[type="application/json"]').map(e=>{if(!e.textContent)return;let o=JSON.parse(e.textContent);return{...o,locations:[o.locations]}}),f=c.map(e=>({companyName:e.company.name,companyLogo:e.company.logo,experience:e.experience,function:e.function,locations:e.locations.map(o=>{if(o)return o.location.city}),publishDate:e.from_date,title:e.title,url:e.urls.ad})),u=[...i,...f];S(u,"publishDate","desc");let p=u.map(e=>L(e,s));n.items=[],n.addItems(p);let a=m('[startup-jobs-element="checkbox-template"]');if(!a)return;let y=m('[startup-jobs-element="filter-list-experience"]'),x=m('[startup-jobs-element="filter-list-function"]'),E=m('[startup-jobs-element="filter-list-location"]'),b=new Set,w=new Set,T=new Set;u.forEach(e=>{e.experience&&b.add(e.experience),e.function&&w.add(e.function),e.locations.forEach(o=>o!==null&&T.add(o))}),y&&b.forEach(e=>{let o=d(e,a,"experience");o&&y.appendChild(o)}),E&&T.forEach(e=>{let o=d(e,a,"location");o&&E.appendChild(o)}),x&&w.forEach(e=>{let o=d(e,a,"job-function");o&&x.appendChild(o)}),r.init()}]);})();
